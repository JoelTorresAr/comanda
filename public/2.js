(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{33:function(t,s,a){"use strict";var i=a(8);a.n(i).a},34:function(t,s,a){(t.exports=a(3)(!1)).push([t.i,"\n.centered-input input {\r\n  text-align: center;\n}\n#inspireme--body--index {\r\n  height: 70vh;\n}\n.__vuescroll .hasVBar {\r\n  height: 60vh !important;\n}\n.mesa__header {\r\n  display: flex;\r\n  width: 95%;\r\n  justify-content: space-between;\n}\r\n",""])},38:function(t,s,a){"use strict";a.r(s);var i={data:function(){return{loading:!0,showJoins:!1,actionButton:"",switchNavegator:!1,buttonKeys:[{accion:"JUNTAR",icon:"fas fa-circle-notch"},{accion:"COBRAR",icon:"fas fa-circle-notch"},{accion:"ELIMINAR",icon:"fas fa-circle-notch"},{accion:"SEPARAR",icon:"fas fa-circle-notch"},{accion:"MOVER",icon:"fas fa-circle-notch"}],ip:"",user:"",pisos:"",pisoActual:"0",mesas:"",mesaId:"",mesaActual:"",arrayMesas:[],pin:"",dialog:!1,numcomen:1}},watch:{pisos:function(t){if(Object.keys(t).length>0){var s=Object.keys(t)[0];"0"==this.pisoActual?this.getMesas(s):this.getMesas(this.pisoActual)}}},created:function(){this.pisos=JSON.parse(this.$store.getters.getPISOS),this.pin=this.$store.getters.getPIN,this.ip=this.$store.getters.getIP,this.user=this.$store.getters.getUSERNAME,this.pisoActual=this.$store.getters.getPISO_ACTUAL},methods:{getMesas:function(t){var s=this;this.mesas=[],this.loading=!0,this.pisoActual=t,axios.get("".concat(this.ip,"/?nomFun=tb_mesas&parm_pin=").concat(this.pin,"&parm_piso=").concat(t,"&parm_tipo=M$")).then((function(t){var a=t.data;s.loading=!1,s.mesas=a.mesas})).catch((function(t){console.log(t)}))},getIcon:function(t){var s="";switch(t.st_cmd){case"1":break;case"3":s="fas fa-coins";break;case"4":s="mdi mdi-pot-steam"}return s},actionButtons:function(t){switch(t){case"JUNTAR":this.showJoins?(this.actionButton="",this.showJoins=!this.showJoins,this.unirMesas()):(this.actionButton="JUNTAR",this.arrayMesas=[],this.showJoins=!this.showJoins);break;case"SEPARAR":this.showJoins?(this.actionButton="",this.showJoins=!this.showJoins,this.separarMesas()):(this.actionButton="SEPARAR",this.arrayMesas=[],this.showJoins=!this.showJoins);break;case"MOVER":this.showJoins?(this.actionButton="",this.showJoins=!this.showJoins,this.moverMesas()):(console.log("mover"),this.actionButton="MOVER",this.arrayMesas=[],this.showJoins=!this.showJoins)}},actionMesa:function(t,s){var a=t.st_cmd;switch(this.actionButton){case"JUNTAR":if("3"!=a&"4"!=a){var i=!1;if(this.arrayMesas.forEach((function(t){t.id==s&&(i=!0,o=t)})),i){var e=this.arrayMesas.indexOf(o);this.arrayMesas.splice(e,1)}else{var n={id:s,id_cmd:t.id_cmd,st_cmd:t.st_cmd,st_join:1};this.arrayMesas.push(n)}}break;case"SEPARAR":if(1===t.juntada){i=!1;if(this.arrayMesas.forEach((function(t){t.id==s&&(i=!0,o=t)})),i)this.arrayMesas=[];else{n={id:s,id_cmd:t.id_cmd,st_cmd:t.st_cmd,st_join:1};this.arrayMesas=[],this.arrayMesas.push(n)}}break;case"MOVER":if("3"!=a&"4"!=a){var o;i=!1;if(this.arrayMesas.forEach((function(t){t.id==s&&(i=!0,o=t)})),i){e=this.arrayMesas.indexOf(o);this.arrayMesas.splice(e,1)}else if(this.arrayMesas.length<2){n={id:s,id_cmd:t.id_cmd,st_cmd:t.st_cmd,st_join:1};this.arrayMesas.push(n)}}break;default:this.newComanda(t,s)}},checkJoin:function(t){var s="";switch(this.actionButton){case"JUNTAR":case"SEPARAR":case"MOVER":s="mdi mdi-checkbox-blank-outline",this.arrayMesas.forEach((function(a){a.id==t&&(s="mdi mdi-checkbox-marked-outline")}))}return s},showChecksinMesa:function(t){var s=t.st_cmd,a=!1;switch(this.actionButton){case"JUNTAR":this.showJoins&"3"!=s&"4"!=s&&(a=!0);break;case"SEPARAR":this.showJoins&1===t.juntada&&(a=!0);break;case"MOVER":this.showJoins&"3"!=s&"4"!=s&&(a=!0)}return a},newComanda:function(t,s){var a=this;this.mesaId=s,this.mesaActual=t,this.$store.commit("SET_MESA_ACTUAL",JSON.stringify(t)),this.$store.commit("SET_ID_MESA_ACTUAL",s);var i=this.$store.getters.getUSERID;if(""==t.st_cmd)this.saveComanda();else{var e="".concat(this.ip,"/?nomFun=tb_revisar_cmd&parm_pin=").concat(this.pin,"&parm_piso=").concat(this.pisoActual,"&parm_id_cmd=").concat(t.id_cmd,"&parm_tipocmd=1&parm_id_mesero=").concat(i,"&parm_tipo=M$");axios.get(e).then((function(t){var s=t.data;if(0!==s.status)a.$router.push({name:"Store"}),a.$store.commit("SET_PISO_ACTUAL",a.pisoActual);else if("Comanda no existe"==s.msg)Swal.fire({title:"Advertencia!",text:s.msg,icon:"warning",confirmButtonText:"OK"}),a.getMesas(a.pisoActual);else{var i=a.$store.getters.getUSERNAME,e="Comanda esta siendo Editada por mesero: ".concat(i);s.msg!=e?Swal.fire({title:"Advertencia!",text:s.msg,icon:"warning",confirmButtonText:"OK"}):(a.$router.push({name:"Store"}),a.$store.commit("SET_PISO_ACTUAL",a.pisoActual))}})).catch((function(t){console.log(t)}))}},saveComanda:function(){var t=this,s=this.$store.getters.getUSERID,a="".concat(this.ip,"/?nomFun=tb_new_cmd&parm_pin=").concat(this.pin,"&parm_piso=").concat(this.pisoActual,"&parm_id_mesas=").concat(this.mesaId,"&parm_num=").concat(this.numcomen,"&parm_tipocmd=1&parm_id_mesero=").concat(s,"&parm_tipo=M$");axios.get(a).then((function(s){var a=s.data;"Ok"==a.msg?(t.mesaActual.id_cmd=a.idcmd,t.$store.commit("SET_MESA_ACTUAL",JSON.stringify(t.mesaActual)),t.$router.push({name:"Store"}),t.$store.commit("SET_PISO_ACTUAL",t.pisoActual),t.dialog=!1):(Swal.fire({title:"Advertencia!",text:a.msg,icon:"warning",confirmButtonText:"OK"}),t.getMesas(t.pisoActual))})).catch((function(t){console.log(t)}))},unirMesas:function(){var t=this,s=(this.$store.getters.getUSERID,""),a="";this.arrayMesas.forEach((function(t){0!=t.id_cmd&&(s=t.id_cmd),a=a+","+String(t.id)}));var i="".concat(this.ip,"/?nomFun=tb_juntar_mesa&parm_id_cmd=").concat(s,"&parm_id_mesas=").concat(a,"&parm_tipo=M$");axios.get(i).then((function(s){var a=s.data;"Ok"==a.msg?(t.arrayMesas=[],t.getMesas(t.pisoActual)):(Swal.fire({title:"Advertencia!",text:a.msg,icon:"warning",confirmButtonText:"OK"}),t.getMesas(t.pisoActual),t.arrayMesas=[])})).catch((function(s){t.arrayMesas=[],console.log(s)}))},separarMesas:function(){var t=this,s="",a="";this.arrayMesas.forEach((function(t){0!=t.id_cmd&&(s=t.id_cmd),a=String(t.id)}));var i="".concat(this.ip,"/?nomFun=tb_separar_mesa&parm_id_cmd=").concat(s,"&parm_id_mesa=").concat(a,"&parm_tipo=M$");axios.get(i).then((function(s){var a=s.data;"OK"==a.msg?(t.arrayMesas=[],t.getMesas(t.pisoActual)):(Swal.fire({title:"Advertencia!",text:a.msg,icon:"warning",confirmButtonText:"OK"}),t.getMesas(t.pisoActual),t.arrayMesas=[])})).catch((function(s){t.arrayMesas=[],console.log(s)}))},moverMesas:function(){var t=this,s="",a="";this.arrayMesas.forEach((function(t){0!=t.id_cmd?s=t.id_cmd:a=t.id}));var i="".concat(this.ip,"/?nomFun=tb_mover_mesa&parm_id_cmd=").concat(s,"&parm_id_mesa=").concat(a,"&parm_tipo=M$");axios.get(i).then((function(s){var a=s.data;"OK"==a.msg?(t.arrayMesas=[],t.getMesas(t.pisoActual)):(Swal.fire({title:"Advertencia!",text:a.msg,icon:"warning",confirmButtonText:"OK"}),t.getMesas(t.pisoActual),t.arrayMesas=[])})).catch((function(s){t.arrayMesas=[],console.log(s)}))},logout:function(){this.$store.commit("SET_PIN",null),this.$router.push({name:"Login"})}}},e=(a(33),a(2)),n=Object(e.a)(i,(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("v-app",[a("v-app-bar",{staticStyle:{height:"3rem"},attrs:{app:"","clipped-right":""}},[a("v-slide-group",{attrs:{multiple:"","show-arrows":""}},t._l(t.pisos,(function(s,i){return a("v-slide-item",{key:i,scopedSlots:t._u([{key:"default",fn:function(e){var n=e.active;return[a("v-btn",{staticClass:"ma-2 white--text card card-block",attrs:{tile:"","input-value":n,color:i==t.pisoActual?"black":"light-green darken-4"},on:{click:function(s){return t.getMesas(i)}}},[t._v(t._s(s))])]}}],null,!0)})})),1),t._v(" "),a("v-spacer"),t._v(" "),a("v-switch",{attrs:{label:"Opciones de mesa"},model:{value:t.switchNavegator,callback:function(s){t.switchNavegator=s},expression:"switchNavegator"}})],1),t._v(" "),a("v-main",{attrs:{app:""}},[a("perfect-scrollbar",[a("v-col",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],attrs:{cols:"12"}},[a("app-spinner")],1),t._v(" "),a("v-card",{staticClass:"d-flex flex-wrap",attrs:{flat:"",tile:""}},t._l(t.mesas,(function(s,i){return a("v-card",{key:i,staticClass:"pa-2 mt-4 ml-4 mr-3",attrs:{color:"L"==s.st_mesa?"success":"error",dark:"",height:"6rem",width:"8rem"},on:{click:function(a){return t.actionMesa(s,i)}}},[a("v-card-title",{staticClass:"p-0"},[t._v("\n            "+t._s(s.nombre)+"\n            "),a("i",{directives:[{name:"show",rawName:"v-show",value:t.showChecksinMesa(s),expression:"showChecksinMesa(item)"}],class:t.checkJoin(i)})]),t._v(" "),a("v-card-text",{staticClass:"pb-0"},[t._v("\n            "+t._s(s.mesero)+"\n            "),a("i",{class:t.getIcon(s)})]),t._v(" "),a("v-card-text",{staticClass:"p-0"},[a("div",{staticClass:"mesa__header"},[a("i",{directives:[{name:"show",rawName:"v-show",value:1==s.juntada,expression:"item.juntada == 1"}],staticClass:"fas fa-link black--text"})])])],1)})),1)],1)],1),t._v(" "),t.switchNavegator?a("v-navigation-drawer",{attrs:{app:"",permanent:"",right:"",clipped:"",width:"12rem",height:"70vh"}},[a("v-list",{attrs:{dense:""}},[a("v-list-item",{on:{click:function(s){return t.actionButtons("JUNTAR")}}},[a("v-list-item-icon",[a("v-icon",[t._v("fas fa-circle-notch")])],1),t._v(" "),a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(1==t.showJoins&&"JUNTAR"===t.actionButton?"OK":"JUNTAR"))])],1)],1),t._v(" "),a("v-list-item",{on:{click:function(s){return t.actionButtons("SEPARAR")}}},[a("v-list-item-icon",[a("v-icon",[t._v("fas fa-circle-notch")])],1),t._v(" "),a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(1==t.showJoins&&"SEPARAR"===t.actionButton?"OK":"SEPARAR"))])],1)],1),t._v(" "),a("v-list-item",{on:{click:function(s){return t.actionButtons("MOVER")}}},[a("v-list-item-icon",[a("v-icon",[t._v("fas fa-circle-notch")])],1),t._v(" "),a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(1==t.showJoins&&"MOVER"===t.actionButton?"OK":"MOVER"))])],1)],1)],1)],1):t._e(),t._v(" "),a("v-footer",{staticClass:"text--accent-3",staticStyle:{height:"3rem"},attrs:{app:""}},[a("span",[t._v(t._s(t.user))]),t._v(" "),a("v-spacer"),t._v(" "),a("v-btn",{staticClass:"ma-2 white--text mt-0",attrs:{tile:"","min-width":"8rem",color:"purple accent-4"},on:{click:t.logout}},[t._v("BLOQUEAR")])],1),t._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"600px",height:"100rem"},model:{value:t.dialog,callback:function(s){t.dialog=s},expression:"dialog"}},[a("v-card",[a("v-card-text",{staticClass:"p-0"},[a("v-container",{staticClass:"pt-0 pb-0"},[a("v-row",[a("v-col",{staticClass:"pt-0 pb-0",attrs:{cols:"12"}},[a("v-text-field",{staticClass:"centered-input display-1",attrs:{type:"number",min:"1",maxlength:"2",counter:2,rules:[function(t){return!!t||"Ingrese una cantidad"}],required:""},model:{value:t.numcomen,callback:function(s){t.numcomen=s},expression:"numcomen"}})],1)],1)],1)],1),t._v(" "),a("v-card-actions",{staticClass:"pt-0 pb-0"},[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"error",text:""},on:{click:function(s){t.dialog=!1}}},[t._v("Close")]),t._v(" "),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.saveComanda}},[t._v("Save")])],1)],1)],1)],1)}),[],!1,null,null,null);s.default=n.exports},8:function(t,s,a){var i=a(34);"string"==typeof i&&(i=[[t.i,i,""]]);var e={hmr:!0,transform:void 0,insertInto:void 0};a(4)(i,e);i.locals&&(t.exports=i.locals)}}]);