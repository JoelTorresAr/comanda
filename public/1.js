(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{35:function(t,a,i){"use strict";var n=i(9);i.n(n).a},36:function(t,a,i){(t.exports=i(3)(!1)).push([t.i,"\n.mifuente {\r\n  font-size: 1.3vw;\r\n  font-weight: bold;\n}\r\n",""])},39:function(t,a,i){"use strict";i.r(a);var n={data:function(){return{switchNavegator:!1,ip:"",familias:"",buttonKeys:[{accion:"cocina",icon:"mdi-pot-steam"},{accion:"anotacion",icon:"mdi-note-text-outline"},{accion:"precuenta",icon:"mdi-cash-register"}],articulos:[],articlesEnMesa:[],mesa:"",mesaId:"",total:"",pin:"",dialog:!1,noteCmd:"",numcomen:0,cantidad:0,userID:0}},computed:{artList:function(){return this.articlesEnMesa}},created:function(){this.familias=JSON.parse(this.$store.getters.getFAMILIAS),this.mesa=JSON.parse(this.$store.getters.get_MESA_ACTUAL),this.mesaId=this.$store.getters.get_ID_MESA_ACTUAL,this.pin=this.$store.getters.getPIN,this.ip=this.$store.getters.getIP,this.userID=this.$store.getters.getUSERID,this.getArticlesinMesa()},methods:{getArticles:function(t){this.articulos=[],this.articulos=t.json_prod},getArticlesinMesa:function(){var t=this,a="".concat(this.ip,"/?nomFun=tb_revisar_cmd&parm_pin=").concat(this.pin,"&parm_piso=20&parm_id_mesas=").concat(this.mesaId,"&parm_id_cmd=").concat(this.mesa.id_cmd,"&parm_id_mesero=").concat(this.userID,"&parm_tipo=M$");axios.get(a).then((function(a){var i=a.data;"Ok"==i.msg?(t.articlesEnMesa=i.prod,t.total=i.total):Swal.fire({title:"Advertencia!",text:i.msg,icon:"warning",confirmButtonText:"OK"})})).catch((function(t){console.log(t)}))},addToMesa:function(t,a){var i=this,n="".concat(this.ip,"/?nomFun=tb_item&parm_pin=").concat(this.pin,"&parm_piso=20&parm_id_mesas=").concat(this.mesaId,"&parm_id_prod=").concat(a,"&parm_cant=1&parm_id_cmd=").concat(this.mesa.id_cmd,"&parm_id_mesero=").concat(this.userID,"&parm_tipo=M$");axios.get(n).then((function(t){var a=t.data;"Ok"==a.msg?(i.articlesEnMesa=a.prod,i.total=a.total):Swal.fire({title:"Advertencia!",text:a.msg,icon:"warning",confirmButtonText:"OK"})})).catch((function(t){console.log(t)}))},addNote:function(){var t=this,a="".concat(this.ip,"/?nomFun=tb_new_notacmd&parm_pin=").concat(this.pin,"&parm_piso=20&parm_id_mesas=").concat(this.mesaId,"&parm_id_cmd=").concat(this.mesa.id_cmd,"&parm_id_mesero=").concat(this.userID,"&parm_nota=").concat(this.noteCmd,"&parm_tipo=M$");axios.get(a).then((function(a){var i=a.data;t.dialog=!1,"OK"==i.msg?t.noteCmd="":(t.noteCmd="",Swal.fire({title:"Advertencia!",text:i.msg,icon:"warning",confirmButtonText:"OK"}))})).catch((function(t){console.log(t)}))},alterList:function(t,a){var i=this,n=1;if("minus"==a&&(n=-1),"remove"==a&&(n=0),1===t.print&&"plus"!=a)Swal.fire({title:"Advertencia!",text:"Esta accion solo la puede ejecutar un administrador",icon:"warning",confirmButtonText:"OK"});else{var e="".concat(this.ip,"/?nomFun=tb_item&parm_pin=").concat(this.pin,"&parm_piso=20&parm_id_mesas=").concat(this.mesaId,"&parm_id_prod=").concat(t.idprod,"&parm_cant=").concat(n,"&parm_id_cmd=").concat(this.mesa.id_cmd,"&parm_id_mesero=").concat(this.userID,"&parm_tipo=M$");axios.get(e).then((function(t){var a=t.data;"Ok"==a.msg?(i.articlesEnMesa=a.prod,i.total=a.total):Swal.fire({title:"Advertencia!",text:a.msg,icon:"warning",confirmButtonText:"OK"})})).catch((function(t){console.log(t)}))}},actionButton:function(t){switch(t){case"cocina":this.getPrintDataKitchen();break;case"precuenta":this.getPrintDataPrecuenta();break;case"anotacion":this.dialog=!0}},getPrintDataKitchen:function(){var t=this,a="".concat(this.ip,"/?nomFun=tb_print_cocina&parm_pin=").concat(this.pin,"&parm_piso=20&parm_id_mesas=").concat(this.mesaId,"&parm_id_cmd=").concat(this.mesa.id_cmd,"&parm_id_mesero=").concat(this.userID,"&parm_tipo=M$");axios.get(a).then((function(a){var i=a.data;if("Ok"==i.msg){var n=i.titulo,e=i.prod,o=i.nro_impresiones,s=i.mozo,c=i.nrocmd;t.sendKitchen(n,e,o,s,c)}else Swal.fire({title:"Advertencia!",text:i.msg,icon:"warning",confirmButtonText:"OK"})})).catch((function(t){console.log(t)}))},sendKitchen:function(t,a,i,n,e){var o=this;axios.post("api/comanda/imprimir/cocina",{titulo:t,prod:a,nro_print:i,mozo:n,nrocmd:e}).then((function(t){var a=t.data;"OK"==a.msg?(Swal.fire({title:"Enviado a cocina!",text:a.msg,icon:"success",confirmButtonText:"OK"}),o.salir()):Swal.fire({title:"Advertencia!",text:a.msg,icon:"warning",confirmButtonText:"OK"})})).catch((function(t){t.response&&t.response.status}))},getPrintDataPrecuenta:function(){var t=this,a="".concat(this.ip,"/?nomFun=tb_print_precuenta&parm_pin=").concat(this.pin,"&parm_piso=20&parm_id_mesas=").concat(this.mesaId,"&parm_id_cmd=").concat(this.mesa.id_cmd,"&parm_id_mesero=").concat(this.userID,"&parm_tipo=M$");axios.get(a).then((function(a){var i=a.data;if("Ok"==i.msg){var n=i.empresa,e=i.cajero,o=i.mozo,s=i.mesas,c=i.prod,r=i.sub_total,m=i.adicionales,l=i.total;t.sendPrecuenta(n,e,o,s,c,r,m,l)}else Swal.fire({title:"Advertencia!",text:i.msg,icon:"warning",confirmButtonText:"OK"})})).catch((function(t){console.log(t)}))},sendPrecuenta:function(t,a,i,n,e,o,s,c){var r=this;axios.post("api/comanda/imprimir/precuenta",{empresa:t,cajero:a,mozo:i,mesas:n,prod:e,sub_total:o,adicionales:s,total:c}).then((function(t){var a=t.data;"OK"==a.msg?r.salir():Swal.fire({title:"Advertencia!",text:a.msg,icon:"warning",confirmButtonText:"OK"})})).catch((function(t){console.log(t)}))},salir:function(){var t=this,a="".concat(this.ip,"/?nomFun=tb_des_cmd&parm_pin=").concat(this.pin,"&parm_id_cmd=").concat(this.mesa.id_cmd,"&parm_id_mesero=").concat(this.userID,"&parm_tipo=M$");axios.get(a).then((function(a){var i=a.data;"Ok"==i.msg?t.$router.push({name:"Home"}):Swal.fire({title:"Advertencia!",text:i.msg,icon:"warning",confirmButtonText:"OK"}).then((function(a){a.value&&t.$router.push({name:"Home"})}))})).catch((function(t){console.log(t)}))}}},e=(i(35),i(2)),o=Object(e.a)(n,(function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("v-app",[i("meta",{attrs:{charset:"utf-8"}}),t._v(" "),i("v-navigation-drawer",{attrs:{app:"",permanent:"",fixed:"",clipped:"",width:"35vw",height:"70vh"}},t._l(t.artList,(function(a,n){return i("v-list-item",{key:n,staticClass:"pl-2 pr-2"},[i("v-list-item-action",{staticClass:"mr-2"},[i("div",[i("v-btn",{attrs:{color:"primary",fab:"","x-small":"",dark:""},on:{click:function(i){return t.alterList(a,"minus")}}},[i("v-icon",[t._v("mdi-minus")])],1),t._v("\n          "+t._s(a.cant)+"\n          "),i("v-btn",{attrs:{color:"primary",fab:"","x-small":"",dark:""},on:{click:function(i){return t.alterList(a,"plus")}}},[i("v-icon",[t._v("mdi-plus")])],1)],1)]),t._v(" "),i("v-list-item-content",[i("v-list-item-subtitle",[i("small",[i("b",{staticClass:"mifuente"},[t._v(t._s(a.name))])])])],1),t._v(" "),i("v-list-item-action",{staticClass:"ml-2"},[i("v-btn",{attrs:{color:"red",fab:"","x-small":"",dark:""},on:{click:function(i){return t.alterList(a,"remove")}}},[i("v-icon",[t._v("mdi-delete")])],1)],1)],1)})),1),t._v(" "),i("v-app-bar",{attrs:{app:"","clipped-left":"",height:"35vh"}},[i("v-toolbar-title",[i("strong",[t._v(t._s(t.mesa.nombre))])]),t._v(" "),i("v-spacer"),t._v(" "),i("v-btn",{attrs:{color:"warning"},on:{click:t.salir}},[i("v-icon",[t._v("mdi-arrow-left-bold")])],1)],1),t._v(" "),i("v-main",{attrs:{app:"",height:"40vh"}},[i("v-toolbar",{attrs:{dense:"","min-width":"65vw"}},[i("v-slide-group",{attrs:{multiple:"","show-arrows":""}},t._l(t.familias,(function(a,n){return i("v-slide-item",{key:n,scopedSlots:t._u([{key:"default",fn:function(n){var e=n.active;return[i("v-btn",{staticClass:"ma-2 white--text card card-block",attrs:{tile:"","input-value":e,color:"light-blue darken-4"},on:{click:function(i){return t.getArticles(a)}}},[t._v(t._s(a.nombre))])]}}],null,!0)})})),1)],1),t._v(" "),i("perfect-scrollbar",[i("v-card",{staticClass:"d-flex flex-wrap",attrs:{flat:"",tile:""}},t._l(t.articulos,(function(a,n){return i("v-card",{key:n,staticClass:"pa-2 mt-4 ml-4",attrs:{color:"orange lighten-4",dark:"",width:"10rem",height:"8rem"},on:{click:function(i){return t.addToMesa(a,n)}}},[i("v-card-text",{staticClass:"black--text",staticStyle:{height:"5rem!important"}},[t._v(t._s(a.nombre))]),t._v(" "),i("v-card-actions",{staticClass:"black"},[i("strong",[t._v("S/."+t._s(a.precio))])])],1)})),1)],1)],1),t._v(" "),i("v-footer",{staticClass:"text--accent-3",attrs:{app:"",fixed:"",height:"40vh"}},[i("strong",{staticClass:"subheading"},[t._v("Total: S/."+t._s(t.total))]),t._v(" "),i("v-spacer"),t._v(" "),t._l(t.buttonKeys,(function(a){return i("v-btn",{key:a.accion,staticClass:"mr-3 mt-0",attrs:{color:"primary"},on:{click:function(i){return t.actionButton(a.accion)}}},[i("v-icon",{attrs:{large:""}},[t._v(t._s(a.icon))])],1)}))],2),t._v(" "),i("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:t.dialog,callback:function(a){t.dialog=a},expression:"dialog"}},[i("v-card",[i("v-card-text",{staticClass:"p-0"},[i("v-container",{staticClass:"pt-0 pb-0"},[i("v-row",[i("v-col",{staticClass:"pt-0 pb-0",attrs:{cols:"12"}},[i("v-text-field",{staticClass:"centered-input display-1",attrs:{label:"Ingrese nota de comanda",type:"text",rules:[function(t){return!!t||"Ingrese una nota"}],required:""},model:{value:t.noteCmd,callback:function(a){t.noteCmd=a},expression:"noteCmd"}})],1)],1)],1)],1),t._v(" "),i("v-card-actions",{staticClass:"pt-0 pb-0"},[i("v-spacer"),t._v(" "),i("v-btn",{attrs:{color:"error",text:""},on:{click:function(a){t.dialog=!1}}},[t._v("Close")]),t._v(" "),i("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.addNote}},[t._v("Save")])],1)],1)],1)],1)}),[],!1,null,null,null);a.default=o.exports},9:function(t,a,i){var n=i(36);"string"==typeof n&&(n=[[t.i,n,""]]);var e={hmr:!0,transform:void 0,insertInto:void 0};i(4)(n,e);n.locals&&(t.exports=n.locals)}}]);